<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Veda v kocke ‚Äì Kv√≠z</title>
  <style>
    /* =====================
       Z√ÅKLADN√ù VZHƒΩAD / T√âMA
       ===================== */
    :root{
      --bg1:#0b1020;           /* tmav√© vesm√≠rne pozadie */
      --bg2:#121a36;
      --primary:#5cff94;       /* neon zelen√° (brand akcent) */
      --secondary:#72d2ff;     /* cyan akcent */
      --accent:#ff7ad9;        /* ru≈æov√Ω akcent */
      --text:#e6f0ff;          /* svetl√Ω text */
      --muted:#9fb3d7;
      --card:#101634cc;        /* sklenen√° karta */
      --right:#2ecc71;
      --wrong:#ff5b5b;
      --shadow: 0 10px 40px rgba(0,0,0,.35), 0 0 60px rgba(114,210,255,.08);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 600px at 10% 0%,#15204d 0%,transparent 60%),
                  radial-gradient(900px 500px at 90% 10%,#35124d 0%,transparent 55%),
                  radial-gradient(700px 400px at 50% 100%,#0d3a4e 0%,transparent 60%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      background-attachment: fixed;
      overflow-x:hidden;
    }
    /* hviezdny ≈°um */
    body::before{
      content:""; position:fixed; inset:0; z-index:-1;
      background-image: radial-gradient(2px 2px at 20% 30%,rgba(255,255,255,.6) 40%,transparent 41%),
                        radial-gradient(1.5px 1.5px at 60% 70%,rgba(255,255,255,.45) 40%,transparent 41%),
                        radial-gradient(1.2px 1.2px at 80% 20%,rgba(255,255,255,.35) 40%,transparent 41%),
                        radial-gradient(1px 1px at 30% 80%,rgba(255,255,255,.25) 40%,transparent 41%);
      opacity:.5; pointer-events:none;
    }

    .wrap{min-height:100%; display:grid; place-items:center; padding:32px}

    .card{
      width:min(900px, 100%);
      background:var(--card);
      backdrop-filter: blur(10px) saturate(120%);
      -webkit-backdrop-filter: blur(10px) saturate(120%);
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:18px 22px; border-bottom:1px solid rgba(255,255,255,.08);
      background: linear-gradient(90deg, rgba(114,210,255,.10), transparent 40%),
                  linear-gradient(270deg, rgba(255,122,217,.06), transparent 50%);
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      inline-size:40px; block-size:40px; border-radius:12px; display:grid; place-items:center;
      background: radial-gradient(circle at 30% 30%, #1bffb1, #2a6fff 70%);
      box-shadow:0 0 20px rgba(114,210,255,.45), inset 0 0 20px rgba(92,255,148,.35);
      font-weight:700; color:#061019;
    }
    .title{font-weight:800; letter-spacing:.5px}
    .badge{
      font-size:.85rem; padding:6px 10px; border-radius:999px; color:#061019; font-weight:700;
      background: linear-gradient(90deg,var(--primary),#9dffdb);
      box-shadow:0 0 16px rgba(92,255,148,.35);
    }

    main{padding:28px; display:grid; gap:20px}

    /* stavov√Ω pruh */
    .progress{
      display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    }
    .dot{width:14px; height:14px; border-radius:999px; background:#334169; opacity:.5; transition:.25s}
    .dot.active{background:var(--secondary); opacity:1; box-shadow:0 0 0 3px rgba(114,210,255,.15), 0 0 18px rgba(114,210,255,.55)}
    .dot.done{background:var(--primary); opacity:1; box-shadow:0 0 0 3px rgba(92,255,148,.12), 0 0 18px rgba(92,255,148,.55)}

    /* obrazovky */
    .screen{display:none}
    .screen.active{display:block}

    .hero{
      display:grid; gap:18px; text-align:center; padding:28px; border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(114,210,255,.08), rgba(255,122,217,.06));
    }
    .hero h1{margin:0; font-size:clamp(1.6rem, 3vw + .8rem, 2.4rem)}
    .hero p{margin:0; color:var(--muted)}

    .email-row{display:flex; flex-wrap:wrap; gap:10px; justify-content:center}
    input[type=email]{
      flex:1 1 260px; max-width:420px; padding:14px 16px; border-radius:12px; border:1px solid rgba(255,255,255,.1);
      background:#0d1433; color:var(--text); outline:none;
      box-shadow: inset 0 0 0 1px rgba(114,210,255,.08);
    }
    .btn{
      padding:12px 16px; border:none; border-radius:12px; font-weight:700; cursor:pointer; color:#061019;
      background:linear-gradient(90deg,var(--secondary), #9be0ff);
      box-shadow:0 10px 24px rgba(114,210,255,.35), inset 0 -2px 0 rgba(0,0,0,.25);
      transition: transform .06s ease, box-shadow .2s; user-select:none;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.14)}

    .q-card{display:grid; gap:18px}
    .q-head{display:grid; gap:10px}
    .q-title {
  font-size: 1.35rem;
  font-weight: 900;
  line-height: 1.35;
  letter-spacing: .2px;
  margin-top: 4px;
  color: #ffffff; /* biely text */
  text-shadow: 0 2px 8px rgba(95, 112, 209, 0.568);}
    .q-card .q-head .q-title{
    color:#fff !important;
    text-shadow:0 2px 8px rgba(0,0,0,.35);
  }

  /* text mo≈ænost√≠ ‚Äì v≈ædy biely a ƒçitateƒæn√Ω */
    .answers .opt{
    color:#fff !important;
    font-weight:800;
    text-shadow:0 1px 4px rgba(0,0,0,.35);}

    .meter{
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      box-shadow: inset 0 1px 2px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .meter #meterFill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, #72d2ff, #5cff94);
      box-shadow: 0 0 18px rgba(114,210,255,.35);
      transition: width .35s ease;
      border-radius: inherit;
    }
    .answers{display:grid; gap:12px}
    /* layout pre √ÅNO/NIE */
    .answers.two{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    @media (max-width:520px){ .answers.two{grid-template-columns:1fr} }

    .opt{
      text-align:left; padding:14px; border-radius:14px; border:1px solid rgba(255,255,255,.08);
      background:#0e1536; cursor:pointer; position:relative; overflow:hidden; display:flex; align-items:center; justify-content:flex-start;
    }
    .opt.big{ padding:22px 20px; text-align:center; font-size:1.05rem; justify-content:center }

    /* Pre √ÅNO/NIE tlaƒçidl√° */
    .answers.two .opt.big {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.4rem;
      font-weight: 900;
      color: #ffffff; /* biely text */
      background: linear-gradient(180deg, #0c2a1b, #0b1f17); /* default √ÅNO */
      border: 2px solid rgba(92,255,148,.4);
}
    /* layout √ÅNO/NIE */
    .answers.two{ display:grid; grid-template-columns:1fr 1fr; gap:14px }
    @media (max-width:520px){ .answers.two{ grid-template-columns:1fr } }

    /* veƒæk√©, centrovan√© tlaƒçidl√° */
    .answers.two .opt.big{
      display:flex; align-items:center; justify-content:center;
      padding:22px 20px; font-size:1.4rem; font-weight:900;
      color:#fff; border:2px solid transparent;
}

    /* default farby ‚Äì √ÅNO zelenkast√©, NIE ƒçervenkast√© (iba pozadie) */
    .answers.two .opt.big:first-child{  /* √ÅNO */
      background:linear-gradient(180deg,#0c2a1b,#0b1f17);
      border-color:rgba(92,255,148,.35);
}
    .answers.two .opt.big:last-child{   /* NIE */
      background:linear-gradient(180deg,#2a0c12,#1a0b14);
      border-color:rgba(255,107,107,.35);
}

    /* NEZOBRAZUJ mal√Ω ≈°t√≠tok s p√≠smenkom pri √ÅNO/NIE */
    .answers.two .opt.big span.key{ display:none }

    /* po vyhodnoten√≠ ‚Äì zv√Ωraznenie */
    .opt.correct{
      border-color:rgba(92,255,148,.9) !important;
      box-shadow:0 0 0 3px rgba(92,255,148,.25), 0 0 22px rgba(92,255,148,.25);
}
    .opt.wrong{
      border-color:rgba(255,91,91,.9) !important;
      box-shadow:0 0 0 3px rgba(255,91,91,.2), 0 0 22px rgba(255,91,91,.2);
      filter:saturate(85%);
}

/* mal√© ‚Äû≈°t√≠tky‚Äú priamo na tlaƒçidle po kliknut√≠ */
    .opt.correct::after,
    .opt.wrong::after{
      content:attr(data-tag);
      position:absolute; right:10px; top:10px;
      font-size:.8rem; font-weight:900;
      padding:4px 8px; border-radius:999px; color:#061019;
}
    .opt.correct::after{ background:linear-gradient(90deg,#a0ffcf,#6cd2ff) } /* SPR√ÅVNE */
    .opt.wrong::after{   background:linear-gradient(90deg,#ffc1c1,#ff9aa9) } /* NESPR√ÅVNE */

/* NIE ≈°peci√°lne s ƒçerven√Ωm odtie≈àom */
      .answers.two .opt.big:nth-child(2) {
      background: linear-gradient(180deg, #2a0c12, #1a0b14);
      border-color: rgba(255,107,107,.45);
}

/* Zru≈°enie mal√©ho ≈°t√≠tku pri √ÅNO/NIE */
    .answers.two .opt.big span.key {
      display: none;
}

    .opt:focus{outline:2px solid var(--secondary)}
    .opt span.key{display:inline-grid; place-items:center; width:28px; height:28px; border-radius:8px; margin-right:12px; font-weight:800; color:#061019;
      background:linear-gradient(180deg,#e7f6ff,#72d2ff)}
    .opt.correct{border-color:rgba(46, 204, 113, .6); box-shadow:0 0 0 3px rgba(46,204,113,.15)}
    .opt.wrong{border-color:rgba(255,91,91,.7); box-shadow:0 0 0 3px rgba(255,91,91,.1)}

    .explain{
      display:none; margin-top:8px; padding:16px; border-radius:14px; background:rgba(114,210,255,.06);
      border:1px solid rgba(255,255,255,.08);
    }
    .explain.active{display:block}
    .video-placeholder{
      margin:6px 0 12px; height:190px; border-radius:14px; display:grid; place-items:center;
      border:2px dashed rgba(255,255,255,.2); color:var(--muted); font-weight:700; letter-spacing:.3px;
      background: radial-gradient(600px 260px at 50% 0%, rgba(114,210,255,.09), transparent 60%);
    }

    .footer{display:flex; justify-content:space-between; gap:12px; align-items:center; margin-top:8px}
    .score{opacity:.85}

    /* v√Ωsledok */
    .result{ text-align:center; display:grid; gap:14px; padding:12px }
    .tier{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; font-weight:800; background:linear-gradient(90deg,#FFD166, #FFE29A); color:#432d00 }
    .silver{background:linear-gradient(90deg,#D1D9E6,#F1F4F8); color:#2a323d}
    .gold{background:linear-gradient(90deg,#F6C866,#FBE6A2); color:#4a3200}

    /* respons√≠vne */
    @media (max-width:520px){
      header{flex-direction:column; align-items:flex-start}
      .footer{flex-direction:column; align-items:stretch}
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="card" role="application" aria-label="Kv√≠z Veda v kocke">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">VVK</div>
        <div>
          <div class="title">Veda v kocke</div>
          <div style="font-size:.9rem; color:var(--muted)">Interakt√≠vny kv√≠z pre zvedav√Ωch</div>
        </div>
      </div>
      <div class="badge">#BIOLOGIA #FYZIKA #CHEMIA</div>
    </header>

    <main>
      <!-- PROGRESS BAR -->
      <div class="progress" id="progress"></div>
      <div class="meter" aria-hidden="true"><div id="meterFill"></div></div>

      <!-- SCREEN: √öVOD + E‚ÄëMAIL  -->
      <section class="screen active" id="screen-intro">
        <div class="hero">
          <h1>Vitaj v dimenzii vedy ‚ú®</h1>
          <p>Aby si pokraƒçoval, zadaj svoj e‚Äëmail. Neboj sa ‚Äì sl√∫≈æi len na evidenciu pokroku v skupine <strong>Veda v kocke</strong>.</p>
          <div class="email-row">
            <label class="sr-only" for="email">E‚Äëmail</label>
            <input id="email" name="email" type="email" inputmode="email" placeholder="tvoj@email.sk" autocomplete="email" required>
            <button class="btn" id="btnStart">Pokraƒçova≈•</button>
          </div>
          <small style="color:var(--muted)">Pokraƒçovan√≠m s√∫hlas√≠≈° so spracovan√≠m e‚Äëmailu na √∫ƒçely kv√≠zu.</small>
        </div>
      </section>

      <!-- SCREEN: KV√çZ  -->
      <section class="screen" id="screen-quiz" aria-live="polite">
        <div class="q-card">
          <div class="q-head">
            <div class="q-title" id="qTitle"></div>
          </div>

          <div class="answers" id="answers" role="list"></div>

          <div class="explain" id="explain">
            <div class="video-placeholder">Miesto na video (pribudne nesk√¥r)</div>
            <div id="explainText"></div>
            <div class="footer">
              <div class="score" id="scoreText">Sk√≥re: 0</div>
              <button class="btn" id="btnNext">ƒéal≈°ia ot√°zka</button>
            </div>
          </div>
        </div>
      </section>

      <!-- SCREEN: V√ùSLEDOK -->
      <section class="screen" id="screen-result">
        <div class="result">
          <h2>Hotovo! üéâ</h2>
          <p>Z√≠skal si <strong id="finalScore"></strong> bodov z <strong id="totalQ"></strong>.</p>
          <div id="tierBadge" class="tier">Bronzov√° √∫rove≈à</div>
          <p id="tierText">Sk√∫s e≈°te raz a z√≠ska≈° vy≈°≈°iu √∫rove≈à ‚Äì vedu v kocke m√°≈° na dosah.</p>
          <div class="footer">
            <button class="btn" id="btnRestart">Spusti≈• znova</button>
            <button class="btn ghost" id="btnShare">Zdieƒæa≈• v√Ωsledok</button>
          </div>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
  // =====================
  // D√ÅTA KV√çZU (Slovensky)
  // =====================
  const QUESTIONS = [
    {
      type: 'choice',
      question: 'Ako vie kanvica, kedy je voda zohriata podƒæa po≈æiadavkou?',
      options: [
        {key:'A', text:'naƒç√∫va bublink√°m a keƒè poƒçuje dostatok vrie≈•, vypne sa'},
        {key:'B', text:'m√° v sebe teplomer a mal√©ho ≈°kriatka, ktor√Ω v≈ædy vypne pr√≠vod elektriny do kanvice keƒè je voda uvaren√°'},
        {key:'C', text:'vƒèaka s√∫ƒçiastke z dvoch kovov s r√¥znou teplotnou roz≈•a≈ænos≈•ou ‚Äì ohne sa a vypne pr√∫d'}
      ],
      correctIndex: 2,
      explain: 'T√°to s√∫ƒçiastka sa naz√Ωva bimetalov√Ω p√°sik/plech (bi‚Äëmetal). Pri zahrievan√≠ sa jedna strana roz≈•ahuje viac ne≈æ druh√°, p√°sik sa ohne a rozpoj√≠ kontakt, ƒç√≠m vypne nap√°janie a kanvica sa sama vypne. Be≈æn√° je kombin√°cia ocele a medi alebo mosadze.'
    },
    {
      type: 'choice',
      question: 'Preƒço poƒçujeme vlak prich√°dza≈• sk√¥r vƒèaka ‚Äûp√≠skaniu‚Äù b≈ïzd na koƒæajniciach?',
      options: [
        {key:'A', text:'v skutoƒçnosti to nie s√∫ koƒæajnice, ale staniƒçn√Ω rozhlas'},
        {key:'B', text:'zvuk sa ≈°√≠ri r√Ωchlej≈°ie v tuh√Ωch l√°tkach ne≈æ vo vzduchu ‚Äì v koƒæajniciach doraz√≠ sk√¥r'},
        {key:'C', text:'vlak posiela pred seba zvukov√Ω varovn√Ω sign√°l ako netopier'}
      ],
      correctIndex: 1,
      explain: 'Tuh√© l√°tky maj√∫ ƒçastice bli≈æ≈°ie pri sebe, preto sa v nich mechanick√© kmity (zvuk) pren√°≈°aj√∫ √∫ƒçinnej≈°ie a r√Ωchlej≈°ie. Brzdenie teda ‚Äûpoƒçu≈•‚Äú cez koƒæajnice sk√¥r, ne≈æ vlak doraz√≠.'
    },
    {
      type: 'choice',
      question: 'ƒåo je najnebezpeƒçnej≈°ie, keƒè sa nah√Ωbame nad otvoren√∫ r√∫ru ‚Äì zlat√° retiazka, papierov√° ozdoba vo vlasoch alebo plastov√° n√°u≈°nica?',
      options: [
        {key:'A', text:'zlat√° retiazka ‚Äì vysok√° tepeln√° vodivos≈• m√¥≈æe sp√¥sobi≈• pop√°lenie'},
        {key:'B', text:'papierov√° ozdoba ‚Äì m√¥≈æe ƒæahko zbƒ∫knu≈•'},
        {key:'C', text:'plastov√° n√°u≈°nica ‚Äì roztop√≠ sa a prilep√≠ k uchu'}
      ],
      correctIndex: 0,
      explain: 'Zlato m√° veƒæmi vysok√∫ tepeln√∫ vodivos≈• (‚âà318 W¬∑m‚Åª¬π¬∑K‚Åª¬π), zatiaƒæ ƒço papier (~0,05) a v√§ƒç≈°ina plastov (‚â§1) s√∫ tepeln√© izolanty. Pri kr√°tkom otvoren√≠ r√∫ry preto najviac hroz√≠ prenos tepla cez kovov√Ω ≈°perk.'
    },
    {
      type: 'tf',
      question: 'Opaƒæovanie je bezpeƒçnej≈°ie ako 5G sie≈•.',
      options: [
        {key:'√ÅNO', text:'√ÅNO'},
        {key:'NIE', text:'NIE'}
      ],
      correctIndex: 1, // spr√°vne: NIE
      explain: 'Slneƒçn√© ≈æiarenie obsahuje UV, ktor√© dok√°≈æe po≈°kodzova≈• bunky a DNA. 5G pou≈æ√≠va r√°diov√© vlny s oveƒæa v√§ƒç≈°ou vlnovou dƒ∫≈ækou a ni≈æ≈°ou energiou ‚Äì ide o neionizuj√∫ce ≈æiarenie.'
    },
    {
      type: 'tf',
      question: 'Farby neexistuj√∫ bez n√°≈°ho vn√≠mania ‚Äì s√∫ to iba r√¥zne vlnov√© dƒ∫≈æky svetla.',
      options: [
        {key:'√ÅNO', text:'√ÅNO'},
        {key:'NIE', text:'NIE'}
      ],
      correctIndex: 0, // spr√°vne: √ÅNO
      explain: 'Svetlo r√¥znych vlnov√Ωch dƒ∫≈æok je fyzik√°lny sign√°l. Farba je v√Ωsledok spracovania tohto sign√°lu zrakom a mozgom. Bez pozorovateƒæa by existovali iba vlnov√© dƒ∫≈æky, nie ‚Äûzelen√°‚Äú ƒçi ‚Äûƒçerven√°‚Äú.'
    },
    {
      type: 'tf',
      question: 'Poƒças misie Apollo¬†17 astronaut ƒçeskoslovensk√©ho p√¥vodu opravil odtrhnut√Ω blatn√≠k mesaƒçn√©ho vozidla pomocou lepiacej p√°sky a m√°p.',
      options: [
        {key:'√ÅNO', text:'√ÅNO'},
        {key:'NIE', text:'NIE'}
      ],
      correctIndex: 0, // spr√°vne: √ÅNO
      explain: 'Je to pravda ‚Äì improvizovan√° oprava umo≈ænila pokraƒçova≈• v jazde. Astronaut Eugene Cernan mal slovensk√© aj ƒçesk√© korene.'
    }
  ];

  // =====================
  // STAV A ELEMENTY
  // =====================
  const elProgress = document.getElementById('progress');
  const elIntro = document.getElementById('screen-intro');
  const elQuiz = document.getElementById('screen-quiz');
  const elResult = document.getElementById('screen-result');

  const elQTitle = document.getElementById('qTitle');
  const elAnswers = document.getElementById('answers');
  const elExplain = document.getElementById('explain');
  const elExplainText = document.getElementById('explainText');
  const elScoreText = document.getElementById('scoreText');

  const elBtnStart = document.getElementById('btnStart');
  const elBtnNext = document.getElementById('btnNext');
  const elBtnRestart = document.getElementById('btnRestart');
  const elBtnShare = document.getElementById('btnShare');

  const elFinalScore = document.getElementById('finalScore');
  const elTotalQ = document.getElementById('totalQ');
  const elTierBadge = document.getElementById('tierBadge');
  const elTierText = document.getElementById('tierText');

  let state = {
    email: '',
    index: 0,
    score: 0,
    answered: false
  };

  // RENDER PROGRESS DOTS
  function renderProgress(){
  elProgress.innerHTML = '';
  QUESTIONS.forEach((_, i) => {
    const d = document.createElement('div');
    d.className = 'dot' + (i < state.index ? ' done' : i === state.index ? ' active' : '');
    elProgress.appendChild(d);
  });

  // dopl≈à meter aj podƒæa toho, ƒçi je aktu√°lna ot√°zka u≈æ zodpovedan√°
  const answeredBoost = state.answered ? 1 : 0;
  const percent = Math.round(((state.index + answeredBoost) / QUESTIONS.length) * 100);
  const fill = document.getElementById('meterFill');
  if (fill) fill.style.width = `${percent}%`;
}

  // VALID√ÅCIA E‚ÄëMAILU A ≈†TART
  elBtnStart.addEventListener('click', ()=>{
    const email = document.getElementById('email').value.trim();
    const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if(!ok){ alert('Zadaj platn√Ω e‚Äëmail.'); return; }
    state.email = email; localStorage.setItem('vvk_email', email);
    goToQuiz();
  });

  function goToQuiz(){
    elIntro.classList.remove('active');
    elQuiz.classList.add('active');
    state.index = 0; state.score = 0; state.answered = false;
    renderProgress();
    renderQuestion();
  }

  function renderQuestion(){
    const q = QUESTIONS[state.index];
    elQTitle.textContent = `${state.index+1}. ${q.question}`;
    elAnswers.innerHTML = '';
    elExplain.classList.remove('active');
    state.answered = false;

    // layout pre true/false ‚Äì dve veƒæk√© tlaƒçidl√° vedƒæa seba
    elAnswers.className = 'answers' + (q.type === 'tf' ? ' two' : '');

    q.options.forEach((opt, i)=>{
      const btn = document.createElement('button');
      btn.className = 'opt' + (q.type === 'tf' ? ' big' : '');
      btn.setAttribute('role','listitem');
      btn.innerHTML = `<span class="key">${opt.key}</span>${opt.text}`;
      btn.addEventListener('click', ()=> selectAnswer(i));
      btn.addEventListener('keyup', (e)=> { if(e.key === 'Enter' || e.key === ' '){ selectAnswer(i);} });
      elAnswers.appendChild(btn);
    });
  }

  function selectAnswer(i){
    if(state.answered) return;
    const q = QUESTIONS[state.index];
    const nodes = [...elAnswers.children];
    nodes.forEach(n=>n.disabled = true);

    if(i === q.correctIndex){
      state.score++;
      nodes[i].classList.add('correct');
      nodes[i].setAttribute('data-tag','SPR√ÅVNE');
  }   else {
      nodes[i].classList.add('wrong');
      nodes[i].setAttribute('data-tag','NESPR√ÅVNE');
      nodes[q.correctIndex].classList.add('correct');
      nodes[q.correctIndex].setAttribute('data-tag','SPR√ÅVNA');
  }

    elExplainText.textContent = q.explain;
    elExplain.classList.add('active');
    elScoreText.textContent = `Sk√≥re: ${state.score}`;
    state.answered = true;
    renderProgress();
}

  elBtnNext.addEventListener('click', ()=>{
    if(!state.answered){ alert('Najprv vyber odpoveƒè.'); return; }
    state.index++;
    if(state.index >= QUESTIONS.length){
      showResult();
    } else {
      renderProgress();
      renderQuestion();
    }
  });

  function showResult(){
    elQuiz.classList.remove('active');
    elResult.classList.add('active');
    const total = QUESTIONS.length;
    elFinalScore.textContent = state.score;
    elTotalQ.textContent = total;

    // √∫rovne
    const ratio = state.score/total;
    if(ratio >= .84){
      elTierBadge.textContent = 'Zlat√° √∫rove≈à';
      elTierBadge.className = 'tier gold';
      elTierText.textContent = '≈†piƒçkov√Ω v√Ωkon! Z√≠skava≈° zlat√∫ ‚Äì tvoje vedomosti ≈æiaria.';
    } else if(ratio >= .5){
      elTierBadge.textContent = 'Strieborn√° √∫rove≈à';
      elTierBadge.className = 'tier silver';
      elTierText.textContent = 'V√Ωborne! Si na striebornej ‚Äì e≈°te k√∫sok k zlatu!';
    } else {
      elTierBadge.textContent = 'Bronzov√° √∫rove≈à';
      elTierBadge.className = 'tier';
      elTierText.textContent = 'Z√≠skal si bronz. Sk√∫s to znova a posu≈à sa vy≈°≈°ie!';
    }
  }

  elBtnRestart.addEventListener('click', ()=>{
    elResult.classList.remove('active');
    elQuiz.classList.add('active');
    state.index = 0; state.score = 0; state.answered = false;
    renderProgress();
    renderQuestion();
  });

  elBtnShare.addEventListener('click', async ()=>{
    const txt = `Veda v kocke: z√≠skal som ${state.score}/${QUESTIONS.length}!`;
    if(navigator.share){
      try{ await navigator.share({title:'Veda v kocke ‚Äì kv√≠z', text:txt}); }catch(e){}
    } else {
      navigator.clipboard?.writeText(txt);
      alert('V√Ωsledok skop√≠rovan√Ω do schr√°nky.');
    }
  });

  // ak je e‚Äëmail ulo≈æen√Ω, predvypl≈à
  window.addEventListener('DOMContentLoaded', ()=>{
    const saved = localStorage.getItem('vvk_email');
    if(saved){ document.getElementById('email').value = saved; }
  });

  // Pom√¥cka pre ƒç√≠taƒçky obrazovky
  const sr = document.createElement('style'); sr.textContent = '.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}'; document.head.appendChild(sr);
</script>
</body>
</html>
